tags:
  - Users

summary: Get users or get a user by ID
description: >
  Returns a list of users with optional filtering using query parameters.  
  If an ID is provided, returns a single user.

parameters:
  - name: id
    in: path
    required: false
    type: integer
    description: ID of the user to retrieve

  - name: dynamic_filters
    in: query
    required: false
    type: string
    description: >
      Dynamic filters based on User model fields.  
      Example: ?name=Omar&email=gmail.com

responses:
  200:
    description: Successful response
    schema:
      type: object
      properties:
        status:
          type: string
          example: success
        data:
          type: array
          description: List of users
          items:
            type: object
            properties:
              id:
                type: integer
                example: 1
              name:
                type: string
                example: "Omar"
              email:
                type: string
                example: "omar@example.com"
              flag:
                type: string
                example: "active"
              roles:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                      example: 2
                    name:
                      type: string
                      example: "Admin"
                    permissions:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 7
                          name:
                            type: string
                            example: "user:read"

  404:
    description: User not found
    schema:
      type: object
      properties:
        status:
          type: string
          example: error
        message:
          type: string
          example: User not found

security:
  - Bearer: []
